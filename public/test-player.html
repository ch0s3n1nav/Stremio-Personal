<!DOCTYPE html>
<html>
<head>
    <title>Debrid Cloud Test Player</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 5px; }
        button { padding: 10px 20px; margin: 10px; background: #d20a0a; color: white; border: none; cursor: pointer; }
    </style>
</head>
<body>
    <h1>Debrid Cloud Connection Test</h1>
    
    <div class="test-section">
        <h2>Test 1: API Connectivity</h2>
        <button onclick="testAPI()">Test API Connection</button>
        <div id="api-result"></div>
    </div>

    <div class="test-section">
        <h2>Test 2: Video Playback</h2>
        <video id="testVideo" width="640" height="360" controls>
            <source src="" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <br>
        <button onclick="testPlayback()">Test Video Playback</button>
        <div id="playback-result"></div>
    </div>

    <script>
        async function testAPI() {
            try {
                const response = await fetch('/api/test-debrid');
                const result = await response.json();
                document.getElementById('api-result').innerHTML = 
                    `<pre>${JSON.stringify(result, null, 2)}</pre>`;
            } catch (error) {
                document.getElementById('api-result').innerHTML = 
                    `Error: ${error.message}`;
            }
        } 

        function testPlayback() {
            // Test with a sample video URL
            const video = document.getElementById('testVideo');
            video.src = "https://test-videos.co.uk/vids/bigbuckbunny/mp4/h264/360/Big_Buck_Bunny_360_10s_1MB.mp4";
            video.load();
            document.getElementById('playback-result').innerHTML = 
                "Loading test video...";
            
            video.oncanplay = function() {
                document.getElementById('playback-result').innerHTML = 
                    "Video can play!";
            };
            
            video.onerror = function() {
                document.getElementById('playback-result').innerHTML = 
                    "Video playback failed";
            };
        }
    </script>
</body>
</html>
